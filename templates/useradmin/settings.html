{% extends 'useradmin/base.html' %} {% load static %} {% block content %}

<section class="content-main">
    <div class="content-header">
        <h2 class="content-title">Profile setting</h2>

    </div>
    
    <div class="card">
        <div class="card-body">
            <!-- Message popup -->
            {% include 'includes/alerts.html' %}
            <!-- // Message popup -->
            <div class="row gx-5">
                <aside class="col-lg-3 border-end">
                    <nav class="nav nav-pills flex-lg-column mb-4">
                        <a class="nav-link active" aria-current="page" href="#"
                            >General</a
                        >
                        <a class="nav-link" href="#">Moderators</a>
                        <a class="nav-link" href="#">Admin account</a>
                        <a class="nav-link" href="#">SEO settings</a>
                        <a class="nav-link" href="#">Mail settings</a>
                        <a class="nav-link" href="#">Newsletter</a>
                    </nav>
                </aside>
                <div class="col-lg-9">
                    <section class="content-body p-xl-4">
                        <form method="POST" enctype="multipart/form-data" action="{% url 'settings' %}">
                            {% csrf_token %}
                            <div class="row">
                                <div class="col-lg-8">
                                    <div class="row gx-3">
                                        <div class="col-6 mb-3">
                                            <label class="form-label"
                                                >First name</label
                                            >
                                            <input
                                                class="form-control"
                                                type="text"
                                                placeholder="Type here"
                                                name="first_name"
                                                value="{{profile.first_name}}"
                                            />
                                        </div>
                                        <!-- col .// -->
                                        <div class="col-6 mb-3">
                                            <label class="form-label"
                                                >Last name</label
                                            >
                                            <input
                                                class="form-control"
                                                type="text"
                                                placeholder="Type here"
                                                name="last_name"
                                                value="{{profile.last_name}}"
                                            />
                                        </div>
                                        
                                        <div class="col-lg-12 mb-3">
                                            <label class="form-label"
                                                >Bio</label
                                            >
                                            <input
                                                class="form-control"
                                                type="text"
                                                name="bio"
                                                placeholder="Type here"
                                                value="{{profile.bio}}"
                                            />
                                        </div>
                                        <!-- col .// -->
                                        <div class="col-lg-6 mb-3">
                                            <label class="form-label"
                                                >Address</label
                                            >
                                            <input
                                                class="form-control"
                                                type="text"
                                                name="address"
                                                placeholder="Type here"
                                                value="{{profile.address}}"
                                            />
                                        </div>
                                        <!-- col .// -->
                                        <div class="col-lg-6 mb-3">
                                            <label class="form-label"
                                                >Country</label
                                            >
                                            <input
                                                class="form-control"
                                                type="text"
                                                name="country"
                                                placeholder="Type here"
                                                value="{{profile.country}}"
                                            />
                                        </div>
                                        <div class="col-lg-6 mb-3">
                                            <label class="form-label"
                                                >Phone</label
                                            >
                                            <input
                                                class="form-control"
                                                type="tel"
                                                placeholder="+1234567890"
                                                name="phone"
                                                value="{{profile.phone_number}}"
                                            />
                                        </div>
                                        <!-- col .// -->
                                    </div>
                                    <!-- row.// -->
                                </div>
                                <!-- col.// -->
                                <aside class="col-lg-4">
                                    <figure class="text-lg-center">
                                        <input
                                            type="file"
                                            id="profile-picture-input"
                                            name="profile_picture"
                                            accept="image/*"
                                            style="display: none; cursor: pointer;"
                                            onchange="previewProfilePicture(event)"
                                        />
                                        <img
                                            id="profile-picture"
                                            src="{{profile.image.url}}"
                                            alt="Profile picture"
                                            class="rounded-circle img-fluid user-edit-profile-img"
                                            style="width: 150px"
                                            onclick="document.getElementById('profile-picture-input').click();"
                                        />
                                    </figure>
                                </aside>
                                <!-- col.// -->
                            </div>
                            <!-- row.// -->
                            <br />
                            <button class="btn btn-primary" type="submit">
                                Save changes
                            </button>
                        </form>
                        <hr class="my-5" />
                        <div class="row" style="max-width: 920px">
                            <div class="col-md">
                                <article class="box mb-3 bg-light">
                                    <a
                                        class="btn float-end btn-light btn-sm rounded font-md"
                                        href="{% url 'change_password' %}"
                                        >Change</a
                                    >
                                    <h6>Password</h6>
                                    <small
                                        class="text-muted d-block"
                                        style="width: 70%"
                                        >You can reset or change your password
                                        by clicking here</small
                                    >
                                </article>
                            </div>
                            <!-- col.// -->
                            <div class="col-md">
                                <article class="box mb-3 bg-light">
                                    <a
                                        class="btn float-end btn-light rounded btn-sm font-md"
                                        href="#"
                                        >Deactivate</a
                                    >
                                    <h6>Remove account</h6>
                                    <small
                                        class="text-muted d-block"
                                        style="width: 70%"
                                        >Once you delete your account, there is
                                        no going back.</small
                                    >
                                </article>
                            </div>
                            <!-- col.// -->
                        </div>
                        <!-- row.// -->
                    </section>
                    <!-- content-body .// -->
                </div>
                <!-- col.// -->
            </div>
            <!-- row.// -->
        </div>
        <!-- card body end// -->
    </div>
    <!-- card end// -->
</section>

<script>
    function previewProfilePicture(event) {
      const file = event.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = function (e) {
          document.getElementById("profile-picture").src = e.target.result;
        };
        reader.readAsDataURL(file);
      }
    }
  </script>

{% endblock content %}
